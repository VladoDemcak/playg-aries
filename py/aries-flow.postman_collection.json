{
	"info": {
		"_postman_id": "b97ffe3c-6455-44b2-94a9-be9c1a412168",
		"name": "aries-flow",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "setup-helpers",
			"item": [
				{
					"name": "[Registrator] /register - Authenticate Agent1 DID",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n   \"did\":\"JdRkpwWwCBqjfcrsjAH1GT\",\n   \"verkey\":\"AcFvnqBQUatQmU4kfc9R9XEci8HQfDRPutGFTwpdWUrZ\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8080/register",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"register"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "schema",
			"item": [
				{
					"name": "[Issuer] /schemas - Create schema",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n   \"attributes\":[\n      \"passportNumber\",\n      \"expirationDate\"\n   ],\n   \"schema_version\":\"1.0\",\n   \"schema_name\":\"passport\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{issuer.baseUrl}}/schemas",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"schemas"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "cred_def",
			"item": [
				{
					"name": "[Issuer] /credential-definitions - Send a credDef to the ledger",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tag\": \"PassportCredDef05121999_a\",\n  \"schema_id\": \"JdRkpwWwCBqjfcrsjAH1GT:2:passport:1.0\",\n  \"support_revocation\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{issuer.baseUrl}}/credential-definitions",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"credential-definitions"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "0011-cred-revocation",
			"item": [
				{
					"name": "[Issuer] /revocation/create-registry",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a035b18a-a129-4b77-809b-53d84597f462",
								"exec": [
									"let response = pm.response.json();",
									"pm.environment.set(\"agent1.revoc_reg_id\", response.result.revoc_reg_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"max_cred_num\": 100,\n  \"credential_definition_id\": \"JdRkpwWwCBqjfcrsjAH1GT:3:CL:8:PassportCredDef05121999_a\",\n  \"issuance_by_default\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{issuer.baseUrl}}/revocation/create-registry",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"revocation",
								"create-registry"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Issuer] /revocation/registry/{rev_reg_id}",
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tails_public_uri\": \"http://172.19.0.7:8081/revocation/registry/{{agent1.revoc_reg_id}}/tails-file\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{issuer.baseUrl}}/revocation/registry/{{agent1.revoc_reg_id}}",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"revocation",
								"registry",
								"{{agent1.revoc_reg_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Issuer] /revocation/registry/{rev_reg_id}/publish",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"max_cred_num\": 100,\n  \"credential_definition_id\": \"WgWxqztrNooG92RXvxSTWv:3:CL:20:tag\",\n  \"issuance_by_default\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{issuer.baseUrl}}/revocation/registry/{{agent1.revoc_reg_id}}/publish",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"revocation",
								"registry",
								"{{agent1.revoc_reg_id}}",
								"publish"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "0160-connection-protocol",
			"item": [
				{
					"name": "[Issuer] /connections/create-invitation - Create a new connection invitation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "64bc1bae-4f2f-4216-b606-cd31003382b8",
								"exec": [
									"let response = pm.response.json();",
									"pm.environment.set(\"invitation\", JSON.stringify(response.invitation));",
									"pm.environment.set(\"agent1.connection_id\", response.connection_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{issuer.baseUrl}}/connections/create-invitation",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"connections",
								"create-invitation"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Prover] /connections/receive-invitation - /connections/receive-invitation",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "5fec558d-9b00-41aa-9d4e-21e59a85dc5d",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "d6d590f6-be2e-4f24-9903-3ad557118e96",
								"exec": [
									"let response = pm.response.json();",
									"pm.environment.set(\"agent2.connection_id\", response.connection_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{invitation}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{prover.baseUrl}}/connections/receive-invitation",
							"host": [
								"{{prover.baseUrl}}"
							],
							"path": [
								"connections",
								"receive-invitation"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Prover] /connections/{id}/accept-invitation",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "559fa567-93e8-4bb0-b555-9cd9476d3dbe",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{prover.baseUrl}}/connections/{{agent2.connection_id}}/accept-invitation?my_endpoint=http://172.19.0.8:8002",
							"host": [
								"{{prover.baseUrl}}"
							],
							"path": [
								"connections",
								"{{agent2.connection_id}}",
								"accept-invitation"
							],
							"query": [
								{
									"key": "my_endpoint",
									"value": "http://172.19.0.8:8002"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "[Issuer] /connections/{id}/accept-request",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "c9d04ba8-9756-4a7b-9349-74170a1b8c89",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{issuer.baseUrl}}/connections/{{agent1.connection_id}}/accept-request",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"connections",
								"{{agent1.connection_id}}",
								"accept-request"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "0036-issue-credential",
			"item": [
				{
					"name": "[Issuer] /issue-credential/send-offer",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "05b89b5f-11df-4631-a590-209ac0392fb2",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"comment\": \"Sample comment here!\",\n  \"trace\": false,\n  \"credential_preview\": {\n    \"@type\": \"did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/issue-credential/1.0/credential-preview\",\n    \"attributes\": [\n      {\n        \"name\": \"passportNumber\",\n        \"value\": \"123454321\"\n      },\n      {\n        \"name\": \"expirationDate\",\n        \"value\": \"2020-01-01\"\n      }\n    ]\n  },\n  \"auto_issue\": false,\n  \"cred_def_id\": \"JdRkpwWwCBqjfcrsjAH1GT:3:CL:8:PassportCredDef05121999_a\",\n  \"connection_id\": \"{{agent1.connection_id}}\",\n  \"auto_remove\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{issuer.baseUrl}}/issue-credential/send-offer",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"issue-credential",
								"send-offer"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Issuer] /issue-credential/records - get cred_ex_id",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "faaece51-8df6-4421-bac1-68b82ce1bdd1",
								"exec": [
									"const response = pm.response.json();",
									"const agent2ConnectionId = pm.environment.get(\"agent1.connection_id\");",
									"",
									"const record = response.results.sort((a, b) => b.created_at.localeCompare(a.created_at)).find(result => result.connection_id === agent2ConnectionId);",
									"pm.environment.set(\"agent1.credential_exchange_id\", record.credential_exchange_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{issuer.baseUrl}}/issue-credential/records",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"issue-credential",
								"records"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Prover] /issue-credential/records - get cred_ex_id",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "63983f26-7605-4c45-adde-d607832ed7a8",
								"exec": [
									"const response = pm.response.json();",
									"const agent2ConnectionId = pm.environment.get(\"agent2.connection_id\");",
									"",
									"const record = response.results.sort((a, b) => b.created_at.localeCompare(a.created_at)).find(result => result.connection_id === agent2ConnectionId);",
									"pm.environment.set(\"agent2.credential_exchange_id\", record.credential_exchange_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{prover.baseUrl}}/issue-credential/records",
							"host": [
								"{{prover.baseUrl}}"
							],
							"path": [
								"issue-credential",
								"records"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Prover] /issue-credential/records/{cred_ex_id}/send-request",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c8fdb665-e363-43aa-bd7d-20209f0476ec",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{prover.baseUrl}}/issue-credential/records/{{agent2.credential_exchange_id}}/send-request",
							"host": [
								"{{prover.baseUrl}}"
							],
							"path": [
								"issue-credential",
								"records",
								"{{agent2.credential_exchange_id}}",
								"send-request"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Issuer] /issue-credential/records/{cred_ex_id}/issue",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c9899974-2a06-4b26-b974-14596a8f34d1",
								"exec": [
									"// \"credential_exchange_id\": \"9503e3ea-3b82-4b0a-80df-bb7bb841e4ad\","
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"comment\": \"Some comment\",\n  \"credential_preview\": {\n    \"@type\": \"did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/issue-credential/1.0/credential-preview\",\n    \"attributes\": [\n      {\n        \"name\": \"passportNumber\",\n        \"value\": \"123454321\"\n      },\n      {\n        \"name\": \"expirationDate\",\n        \"value\": \"2020-01-01\"\n      }\n    ]\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{issuer.baseUrl}}/issue-credential/records/{{agent1.credential_exchange_id}}/issue",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"issue-credential",
								"records",
								"{{agent1.credential_exchange_id}}",
								"issue"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Prover] /issue-credential/records/{cred_ex_id}/store",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "85d750fe-f621-4f14-b05b-4d1109c9c0db",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{prover.baseUrl}}/issue-credential/records/{{agent2.credential_exchange_id}}/store",
							"host": [
								"{{prover.baseUrl}}"
							],
							"path": [
								"issue-credential",
								"records",
								"{{agent2.credential_exchange_id}}",
								"store"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Issuer] /issue-credential/revoke",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{issuer.baseUrl}}/issue-credential/revoke?rev_reg_id={{agent1.revoc_reg_id}}&publish=true&cred_rev_id=1",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"issue-credential",
								"revoke"
							],
							"query": [
								{
									"key": "rev_reg_id",
									"value": "{{agent1.revoc_reg_id}}"
								},
								{
									"key": "publish",
									"value": "true"
								},
								{
									"key": "cred_rev_id",
									"value": "1"
								}
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "0037-present-proof",
			"item": [
				{
					"name": "[Issuer] /present-proof/send-request",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "04f58cce-c9e2-4869-9b30-88ade54e92f3",
								"exec": [
									"const response = pm.response.json();",
									"pm.environment.set(\"agent1.presentation_exchange_id\", response.presentation_exchange_id);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "e1cbd10a-e4a2-4e17-8f23-fdc9efc0172f",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"connection_id\": \"{{agent1.connection_id}}\",\n  \"comment\": \"This is a comment about the reason for the proof\",\n  \"proof_request\": {\n    \"name\": \"Proof of Passport\",\n    \"version\": \"1.0\",\n    \"non_revoked\": {\n      \"from\": 1594477318,\n      \"to\": 1594477656\n    },\n    \"requested_attributes\": {\n      \"0_name_uuid\": {\n        \"name\": \"passportNumber\",\n        \"restrictions\": [\n          {\n            \"cred_def_id\": \"JdRkpwWwCBqjfcrsjAH1GT:3:CL:8:PassportCredDef05121999_a\"\n          }\n        ],\n    \"non_revoked\": {\n      \"from\": 1594477318,\n      \"to\": 1594477656\n    }\n      },\n      \"0_date_uuid\": {\n        \"name\": \"expirationDate\",\n        \"restrictions\": [\n          {\n            \"cred_def_id\": \"JdRkpwWwCBqjfcrsjAH1GT:3:CL:8:PassportCredDef05121999_a\"\n          }\n        ],\n    \"non_revoked\": {\n      \"from\": 1594477318,\n      \"to\": 1594477656\n    }\n      }\n    },\n    \"requested_predicates\": {}\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{issuer.baseUrl}}/present-proof/send-request",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"present-proof",
								"send-request"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Prover] /present-proof/records",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d64b1949-ccba-4b46-9bc1-2dae86d3ffff",
								"exec": [
									"const response = pm.response.json();",
									"const agent2ConnectionId = pm.environment.get(\"agent2.connection_id\");",
									"",
									"const record = response.results.sort((a, b) => b.created_at.localeCompare(a.created_at)).find(result => result.connection_id === agent2ConnectionId);",
									"console.log(record.presentation_exchange_id)",
									"pm.environment.set(\"agent2.presentation_exchange_id\", record.presentation_exchange_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{prover.baseUrl}}/present-proof/records",
							"host": [
								"{{prover.baseUrl}}"
							],
							"path": [
								"present-proof",
								"records"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Prover] /credentials",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8e9531a6-ccf1-4305-85e3-a9cbe53d46eb",
								"exec": [
									"const response = pm.response.json();",
									"// const agent2ConnectionId = pm.environment.get(\"agent2.connection_id\");",
									"",
									"const record = response.results.find(result => result.cred_def_id === 'JdRkpwWwCBqjfcrsjAH1GT:3:CL:8:PassportCredDef05121999_a');",
									"pm.environment.set(\"agent2.cred_id\", record.referent);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{prover.baseUrl}}/credentials",
							"host": [
								"{{prover.baseUrl}}"
							],
							"path": [
								"credentials"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Prover] /present-proof/records/{pres_ex_id}/send-presentation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "06abcc72-977e-4300-9cc2-27c5043170ce",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"requested_attributes\": {\n    \"0_name_uuid\": {\n      \"cred_id\": \"{{agent2.cred_id}}\",\n      \"revealed\": true\n    },\n    \"0_date_uuid\": {\n      \"cred_id\": \"{{agent2.cred_id}}\",\n      \"revealed\": true\n    }\n  },\n  \"requested_predicates\": {},\n  \"self_attested_attributes\": {},\n  \"trace\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{prover.baseUrl}}/present-proof/records/{{agent2.presentation_exchange_id}}/send-presentation",
							"host": [
								"{{prover.baseUrl}}"
							],
							"path": [
								"present-proof",
								"records",
								"{{agent2.presentation_exchange_id}}",
								"send-presentation"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Issuer] /present-proof/records/{pres_ex_id}/verify-presentation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c7f21c06-c662-408f-a0b4-a6abd784fd00",
								"exec": [
									"const response = pm.response.json();",
									"console.log(\"verified:\"+ response.verified)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{issuer.baseUrl}}/present-proof/records/{{agent1.presentation_exchange_id}}/verify-presentation",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"present-proof",
								"records",
								"{{agent1.presentation_exchange_id}}",
								"verify-presentation"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Issuer] /present-proof/records/{pres_ex_id}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "4a6fcbfb-3223-4af4-945e-dc9bf7124863",
								"exec": [
									"const response = pm.response.json();",
									"console.log(\"verified:\"+ response.verified)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{issuer.baseUrl}}/present-proof/records/{{agent1.presentation_exchange_id}}",
							"host": [
								"{{issuer.baseUrl}}"
							],
							"path": [
								"present-proof",
								"records",
								"{{agent1.presentation_exchange_id}}"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "DID",
			"item": [
				{
					"name": "[Agent1] /wallet​/did - List wallet DIDs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8081/wallet/did?did=JdRkpwWwCBqjfcrsjAH1GT",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"wallet",
								"did"
							],
							"query": [
								{
									"key": "did",
									"value": "JdRkpwWwCBqjfcrsjAH1GT"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "[Agent2] /wallet​/did - List wallet DIDs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8082/wallet/did",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"wallet",
								"did"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"protocolProfileBehavior": {}
}