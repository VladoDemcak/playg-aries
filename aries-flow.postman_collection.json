{
	"info": {
		"_postman_id": "b97ffe3c-6455-44b2-94a9-be9c1a412168",
		"name": "aries-flow",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "schema",
			"item": [
				{
					"name": "[Agent1] /schemas - Create schema",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n   \"attributes\":[\n      \"passportNumber\",\n      \"expirationDate\"\n   ],\n   \"schema_version\":\"1.0\",\n   \"schema_name\":\"passport\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8081/schemas",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"schemas"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "cred_def",
			"item": [
				{
					"name": "[Agent1] /credential-definitions - Send a credDef to the ledger",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tag\": \"PassportCredDef05121999_a\",\n  \"schema_id\": \"JdRkpwWwCBqjfcrsjAH1GT:2:passport:1.0\",\n  \"support_revocation\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8081/credential-definitions",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"credential-definitions"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "0160-connection-protocol",
			"item": [
				{
					"name": "[Agent1] /connections/create-invitation - Create a new connection invitation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "64bc1bae-4f2f-4216-b606-cd31003382b8",
								"exec": [
									"let response = pm.response.json();",
									"pm.environment.set(\"invitation\", JSON.stringify(response.invitation));",
									"pm.environment.set(\"agent1.connection_id\", response.connection_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "http://localhost:8081/connections/create-invitation",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"connections",
								"create-invitation"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Agent2] /connections/receive-invitation - /connections/receive-invitation",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "5fec558d-9b00-41aa-9d4e-21e59a85dc5d",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "d6d590f6-be2e-4f24-9903-3ad557118e96",
								"exec": [
									"let response = pm.response.json();",
									"pm.environment.set(\"agent2.connection_id\", response.connection_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{invitation}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8082/connections/receive-invitation",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"connections",
								"receive-invitation"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Agent2] /connections/{id}/accept-invitation",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "559fa567-93e8-4bb0-b555-9cd9476d3dbe",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8082/connections/{{agent2.connection_id}}/accept-invitation?my_endpoint=http://172.19.0.8:8002",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"connections",
								"{{agent2.connection_id}}",
								"accept-invitation"
							],
							"query": [
								{
									"key": "my_endpoint",
									"value": "http://172.19.0.8:8002"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "[Agent1] /connections/{id}/accept-request",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "c9d04ba8-9756-4a7b-9349-74170a1b8c89",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8081/connections/{{agent1.connection_id}}/accept-request",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"connections",
								"{{agent1.connection_id}}",
								"accept-request"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "0036-issue-credential",
			"item": [
				{
					"name": "[Agent1] /issue-credential/send",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a7d85801-1b94-402b-9bfe-9a8cc7c8c781",
								"exec": [
									"// \"credential_exchange_id\": \"9503e3ea-3b82-4b0a-80df-bb7bb841e4ad\","
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"issuer_did\": \"JdRkpwWwCBqjfcrsjAH1GT\",\n  \"schema_version\": \"1.0\",\n  \"credential_proposal\": {\n    \"@type\": \"did:sov:BzCbsNYhMrjHiqZDTUASHg;spec/issue-credential/1.0/credential-preview\",\n    \"attributes\": [\n      {\n        \"name\": \"passportNumber\",\n        \"value\": \"123454321\"\n      },\n      {\n        \"name\": \"expirationDate\",\n        \"value\": \"2020-01-01\"\n      }\n    ]\n  },\n  \"comment\": \"This is my sample comment.\",\n  \"cred_def_id\": \"JdRkpwWwCBqjfcrsjAH1GT:3:CL:8:PassportCredDef05121999_a\",\n  \"schema_issuer_did\": \"JdRkpwWwCBqjfcrsjAH1GT\",\n  \"schema_name\": \"passport\",\n  \"schema_id\": \"JdRkpwWwCBqjfcrsjAH1GT:2:passport:1.0\",\n  \"connection_id\": \"{{agent1.connection_id}}\",\n  \"auto_remove\": false,\n  \"trace\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8081/issue-credential/send",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"issue-credential",
								"send"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Agent2] /issue-credential/records - get cred_ex_id",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "63983f26-7605-4c45-adde-d607832ed7a8",
								"exec": [
									"const response = pm.response.json();",
									"const agent2ConnectionId = pm.environment.get(\"agent2.connection_id\");",
									"",
									"const record = response.results.find(result => result.connection_id === agent2ConnectionId);",
									"pm.environment.set(\"agent2.credential_exchange_id\", record.credential_exchange_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8082/issue-credential/records",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"issue-credential",
								"records"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Agent2] /issue-credential/records/{cred_ex_id}/send-request",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c8fdb665-e363-43aa-bd7d-20209f0476ec",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8082/issue-credential/records/{{agent2.credential_exchange_id}}/send-request",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"issue-credential",
								"records",
								"{{agent2.credential_exchange_id}}",
								"send-request"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Agent2] /issue-credential/records/{cred_ex_id}/store",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "85d750fe-f621-4f14-b05b-4d1109c9c0db",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8082/issue-credential/records/{{agent2.credential_exchange_id}}/store",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"issue-credential",
								"records",
								"{{agent2.credential_exchange_id}}",
								"store"
							]
						}
					},
					"response": []
				},
				{
					"name": "In progress .... [Agent1] /issue-credential/revoke - Revoke an issued credential",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "http://localhost:8081/issue-credential/revoke?rev_reg_id=EqfMJ89133WpHQywYznDZT%3A4%3AEqfMJ89133WpHQywYznDZT%3A3%3ACL%3A26%3APassportCredDef05121999_a%3ACL_ACCUM%3APassportCredDef05121999_a_0&cred_rev_id=1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"issue-credential",
								"revoke"
							],
							"query": [
								{
									"key": "rev_reg_id",
									"value": "EqfMJ89133WpHQywYznDZT%3A4%3AEqfMJ89133WpHQywYznDZT%3A3%3ACL%3A26%3APassportCredDef05121999_a%3ACL_ACCUM%3APassportCredDef05121999_a_0"
								},
								{
									"key": "cred_rev_id",
									"value": "1"
								}
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "0037-present-proof",
			"item": [
				{
					"name": "[Agent1] /present-proof/send-request",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "04f58cce-c9e2-4869-9b30-88ade54e92f3",
								"exec": [
									"const response = pm.response.json();",
									"pm.environment.set(\"agent1.presentation_exchange_id\", response.presentation_exchange_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"connection_id\": \"{{agent1.connection_id}}\",\n  \"comment\": \"This is a comment about the reason for the proof\",\n  \"proof_request\": {\n    \"name\": \"Proof of Passport\",\n    \"version\": \"1.0\",\n    \"requested_attributes\": {\n      \"0_name_uuid\": {\n        \"name\": \"passportNumber\",\n        \"restrictions\": [\n          {\n            \"cred_def_id\": \"JdRkpwWwCBqjfcrsjAH1GT:3:CL:8:PassportCredDef05121999_a\"\n          }\n        ]\n      },\n      \"0_date_uuid\": {\n        \"name\": \"expirationDate\",\n        \"restrictions\": [\n          {\n            \"cred_def_id\": \"JdRkpwWwCBqjfcrsjAH1GT:3:CL:8:PassportCredDef05121999_a\"\n          }\n        ]\n      }\n    },\n    \"requested_predicates\": {}\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8081/present-proof/send-request",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"present-proof",
								"send-request"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Agent2] /present-proof/records",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d64b1949-ccba-4b46-9bc1-2dae86d3ffff",
								"exec": [
									"const response = pm.response.json();",
									"const agent2ConnectionId = pm.environment.get(\"agent2.connection_id\");",
									"",
									"const record = response.results.sort((a, b) => b.created_at.localeCompare(a.created_at)).find(result => result.connection_id === agent2ConnectionId);",
									"console.log(record.presentation_exchange_id)",
									"pm.environment.set(\"agent2.presentation_exchange_id\", record.presentation_exchange_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8082/present-proof/records",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"present-proof",
								"records"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Agent2] /present-proof/records/{pres_ex_id}/send-presentation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "06abcc72-977e-4300-9cc2-27c5043170ce",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"requested_attributes\": {\n    \"0_name_uuid\": {\n      \"cred_id\": \"b70321b4-ea29-4077-b011-3f42b1504c32\",\n      \"revealed\": true\n    },\n    \"0_date_uuid\": {\n      \"cred_id\": \"b70321b4-ea29-4077-b011-3f42b1504c32\",\n      \"revealed\": true\n    }\n  },\n  \"requested_predicates\": {},\n  \"self_attested_attributes\": {},\n  \"trace\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8082/present-proof/records/{{agent2.presentation_exchange_id}}/send-presentation",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"present-proof",
								"records",
								"{{agent2.presentation_exchange_id}}",
								"send-presentation"
							]
						}
					},
					"response": []
				},
				{
					"name": "[Agent1] /present-proof/records/{pres_ex_id}/verify-presentation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c7f21c06-c662-408f-a0b4-a6abd784fd00",
								"exec": [
									"const response = pm.response.json();",
									"pm.environment.set(\"agent1.presentation_exchange_id\", response.presentation_exchange_id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "http://localhost:8081/present-proof/records/{{agent1.presentation_exchange_id}}/verify-presentation",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"present-proof",
								"records",
								"{{agent1.presentation_exchange_id}}",
								"verify-presentation"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "DID",
			"item": [
				{
					"name": "[Agent1] /wallet​/did - List wallet DIDs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8081/wallet/did?did=JdRkpwWwCBqjfcrsjAH1GT",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"wallet",
								"did"
							],
							"query": [
								{
									"key": "did",
									"value": "JdRkpwWwCBqjfcrsjAH1GT"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "[Agent2] /wallet​/did - List wallet DIDs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8082/wallet/did",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"wallet",
								"did"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "[Registrator] /register - Authenticate Agent1 DID",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n   \"did\":\"JdRkpwWwCBqjfcrsjAH1GT\",\n   \"verkey\":\"AcFvnqBQUatQmU4kfc9R9XEci8HQfDRPutGFTwpdWUrZ\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8080/register",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"register"
					]
				}
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}